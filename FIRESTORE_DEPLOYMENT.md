# Firestore Security Rules - ูุดุฑ ููุงุนุณ ุงูุฃูุงู

## ๐ ุฎุทูุงุช ุงููุดุฑ (ุงูุฎุงุฏู)

### ุงูุทุฑููุฉ 1๏ธโฃ: ุจุงุณุชุฎุฏุงู Firebase CLI

```bash
# 1๏ธโฃ ุชุซุจูุช Firebase CLI
npm install -g firebase-tools

# 2๏ธโฃ ุชุณุฌูู ุงูุฏุฎูู
firebase login

# 3๏ธโฃ ุงุฎุชูุงุฑ ุงููุดุฑูุน
firebase use odhya-e7cca

# 4๏ธโฃ ูุดุฑ ุงูููุงุนุณ
firebase deploy --only firestore:rules
```

### ุงูุทุฑููุฉ 2๏ธโฃ: ุจุงุณุชุฎุฏุงู Firebase Console

1. ุงุฐูุจ ุฅูู: https://console.firebase.google.com/
2. ุงุฎุชุฑ ูุดุฑูุน: `odhya-e7cca`
3. ุงููุฑ ุนูู `Firestore Database` ูู ุงููุงุฆูุฉ ุงููุณุฑู
4. ุงุถุบุท ุนูู `Rules` ูู ุงูุฃุนูู
5. ุงูุณุฎ ูุญุชูู `firestore.rules` ุงููุงูู
6. ุงูุตู ูู Firebase Console
7. ุงุถุบุท `Publish`

---

## ๐ ูุญุต ุงูููุงุนุณ (ุงูุงุฎุชุจุงุฑ)

```bash
# ูุชุญ Firebase Emulator
firebase emulators:start --only firestore

# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
npm run test:firestore
```

---

## โ ุงูุชุญูู ูู ุงูุชุทุจูู

```javascript
// ุงุฎุชุจุงุฑ ุงููุฑุงุกุฉ (Guest - ูุฌุงูู)
const sheepRef = collection(db, 'sheep');
const q = query(sheepRef, where('status', '==', 'approved'));
const result = await getDocs(q); // โ ูุนูู

// ุงุฎุชุจุงุฑ ุงููุชุงุจุฉ (ูุญูู)
await setDoc(doc(db, 'sheep', 'new-id'), {...}); // โ ููุดู ุจุฏูู ุชุณุฌูู ุฏุฎูู
```

---

## ๐ก๏ธ ุงูููุงุนุณ ุงูุฑุฆูุณูุฉ:

| ุงููุฌููุนุฉ | Guest | Buyer | Seller | Admin |
|---------|-------|--------|--------|-------|
| **users** | ูุฑุงุกุฉ ุนุงูุฉ | ูุงููุฉ | ูุงููุฉ | ูุงููุฉ |
| **sheep** | ููุจููุฉ ููุท | ูุฑุงุกุฉ | CRUD | ูุงููุฉ |
| **orders** | โ | CRUD | ูุฑุงุกุฉ | ูุงููุฉ |
| **reviews** | ูุฑุงุกุฉ | CRUD | ูุฑุงุกุฉ | ูุงููุฉ |
| **favorites** | โ | CRUD | CRUD | ูุฑุงุกุฉ |
| **notifications** | โ | CRUD | CRUD | CRUD |
| **support** | โ | CRUD | CRUD | ูุงููุฉ |

---

## ๐ ุจุนุฏ ุงููุดุฑ:

1. ุงุฎุชุจุฑ Browse Page (Guest Mode) - ูุฌุจ ุฃู ุชุธูุฑ ุงูุฃุบูุงู ุงูููุจููุฉ ููุท โ
2. ุงุฎุชุจุฑ ุฅุถุงูุฉ ุฃุบูุงู (Seller) - ูุฌุจ ุฃู ุชุญูุธ ุจู `status: pending` โ
3. ุงุฎุชุจุฑ Admin Dashboard - ูุฌุจ ุนุฑุถ ุฌููุน ุงูุฃุบูุงู โ
4. ุงุฎุชุจุฑ ุงูุทูุจุงุช - ูุฌุจ ุฃู ูููู ุงููุตูู ูุญุฏูุฏ โ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ:

- โ ุงูููุงุนุณ ุชุฏุนู **ุฌููุน ุงูููุตุงุช** (Web, Mobile, Vercel)
- โ ุงูููุงุนุณ ุชุฏุนู **ูุถุน ุงูุถูู** (Guest Mode ุจุฏูู ุชุณุฌูู ุฏุฎูู)
- โ ุงูููุงุนุณ ุชุฏุนู **ุฌููุน ุงูุฃุฏูุงุฑ** (Buyer, Seller, Admin)
- โ๏ธ ุชุฃูุฏ ูู ูุดุฑ ุงูููุงุนุณ ูุจู ุงูุฅุทูุงู!
- โ๏ธ ุงุฎุชุจุฑ ุฌููุน ุงูุญุงูุงุช ูู Firebase Console

---

## ๐ ุงูุฏุนู:

ุฅุฐุง ุญุฏุซุช ูุดุงูู:
- ุชุญูู ูู logs ูู Firebase Console
- ุงุณุชุฎุฏู Firebase Emulator ููุงุฎุชุจุงุฑ ุงููุญูู
- ุชุฃูุฏ ูู ุฃู `uid()` ูู ุงูููุงุนุณ ูุทุงุจู ูุนุฑู ุงููุณุชุฎุฏู ุงููุนูู
